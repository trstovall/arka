
# Coin: A SHA2 powered transaction chain with Ed25519 signatures

## Bank

### Request payment

- One time request
- Scheduled requests

### Send payment

#### One time payment

#### Scheduled payments

### Send receipts

### Manage accounts and receipts

- Create
- Organize
- Export
- Import

## Chain consensus with PoW

### Authority transaction

    chain: ...sha256...                         # hash of previous transaction in chain
    prev_authority: ...sha256...                # transaction hash of most recent authority transaction
    offset: 0                                   # milliseconds since chain launch
    votes:                                      # `votes` in an authority transaction is a summary
        inflation: 100 * 1024 * 1024            # 100 coin to be generated by each authority transaction
        tax_rate: 1024                          # 1024 units per byte in each transaction is to be destroyed
        auth_period: 60 * 1000                  # 60 seconds between authority transactions
    difficulty: 1                               # 2-byte float from 0 to 2**256
    challenge:
        authority: ...ed25519...
        tx1:  ...payment...
        tx2: ...payment...        
    authority: ...ed25519...                    # Miner's public key
    nonce: ""                                   # 0-31 bytes of arbitrary data
    
### Payment transaction

    chain: ...sha256...                             # hash of previous transaction in chain
    prev_authority: ...sha256...                    # transaction hash of most recent authority transaction
    offset: 0                                       # milliseconds since chain launch
    payment:
        from:
        -   tx_hash: ...sha256...
            outs:
            -   index: 0
                signature: ...ed25519 signature...  # Signed by tx[tx_hash].to[index].address
        to:
        -   address: ...ed25519...                  # Receipients public key
            amount: 0                               # 1 coin = 1024*1024 units
            memo: ...arbitrary binary data...
        votes:
            senator: ~                              # Use as defaults the votes defined in tx_hash 
            inflation: ~                            # Amount of coin generated by authority transactions
            tax_rate: ~                             # Fee per byte of data used by transaction.
            auth_period: ~                          # Target period between authority transactions
    signature:  ...ed25519 signature...             # 64-byte result of ed25519-sign tx by authority

### Consensus

The transaction chain is a linked list which begins with an a particular authority transaction for the given chain.  Authority transactions are generated periodically by random peers.  The defined authority then generates payment transactions, signing any pending payments and appending them to the transaction chain until a new authority transaction is added.

An authority transaction is generated by proof of work, and the chain defines the difficulty of the work which adjusts every 4096 authority transactions.  For the proof of work, generate a SHA256 hash of an authority transaction minus the nonce.  Then, generate a SHA256 hash of the previous hash concatenated with the nonce.  If the hash matches the prefix defined by the difficulty, the authority transaction is approved.

A `chain` hash is provided to point to the previous transaction in the chain.  An authority transaction defines `authority` as the public key of the transaction miner.  This is the key used to sign payment transactions and append them to the chain.  `offset` defines the number of milliseconds elapsed since the first miner began processing the transaction chain.  The `payment` structure defines a set of unspent transaction outputs from previous transactions, and redistributes the total balance, minus transaction data tax, to a new set of outputs.  The `payment` structure includes a set of votes which determine chain consensus parameters.  



## Network

### Peer-voted chain parameters

### UDP Hole punching

### Mesh network with incentivised peering